name: AWS EC2 Self Hosted Runner
description: Create a self hosted runner on AWS EC2
author: Kepler Authors

# Define your inputs here.
inputs:
  action: 
    description: 'The action to perform. One of create, unregister, terminate'
    required: true
  github_token:
    description: 'The GitHub token to use'
    required: true
  aws_access_key_id:
    description: 'The AWS access key id to use'
    required: true
  aws_secret_access_key:
    description: 'The AWS secret access key to use'
    required: true
  security_group_id:
    description: 'The AWS security group id to use'
    required: true
  aws_region:
    description: 'The AWS region to use'
    required: false
  github_repo:
    description: 'The GitHub repo to use'
    required: false
  ami_id:
    description: 'The AMI ID to use for the EC2 instance'
    required: false
  instance_type:
    description: 'The instance type to use for the EC2 instance'
    required: false
  create_s3_bucket:
    description: 'Create an S3 bucket to store the runner state'
    required: false
  spot_instance_only:
    description: 'Only use spot instances'
    required: false

# Define your outputs here.
outputs:
  instane_id:
    description: The AWS EC2 instance id
  runner_name:
    description: The name of the self hosted runner
  bucket_name:
    description: The name of the S3 bucket (if created)

runs:
  using: docker
  image: Dockerfile
